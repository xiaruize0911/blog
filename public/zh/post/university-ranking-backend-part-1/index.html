<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>University Ranking Backendï¼šä»£ç æ·±åº¦è§£æï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰ | xiaruize's Blog</title><meta name=keywords content="Python,Flask,Backend,ä»£ç åˆ†æ"><meta name=description content='æœ¬ç¯‡å°†æ·±å…¥ University Ranking Backend çš„ä»£ç ç»“æ„ã€‚æˆ‘ä»¬æ¢ç´¢åº”ç”¨å…¥å£å’Œé©±åŠ¨å¤§å­¦æœç´¢è¿‡æ»¤ç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘ã€‚
ğŸ—ï¸ æ•´ä½“æ¶æ„
åç«¯éµå¾ªæ ‡å‡†çš„ æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ (MVC) æ¨¡å¼ï¼ˆå…¶ä¸­"è§†å›¾"æ˜¯ JSON å“åº”ï¼‰ã€‚

app.pyï¼šåˆå§‹åŒ–åº”ç”¨ã€æ³¨å†Œè·¯ç”±çš„å…¥å£ç‚¹
routes/ï¼šå¤„ç† HTTP è¯·æ±‚ã€è§£æå‚æ•°ã€å§”æ‰˜ç»™æ¨¡å‹
models/ï¼šåŒ…å«ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“äº¤äº’
db/ï¼šç®¡ç† SQLite æ•°æ®åº“è¿æ¥


1. å…¥å£ç‚¹ï¼šapp.py
è¿™ä¸ªæ–‡ä»¶æ˜¯åº”ç”¨çš„å¿ƒè„ã€‚å®ƒè®¾ç½® Flask æœåŠ¡å™¨ã€é…ç½®å®‰å…¨ï¼Œè¿æ¥æ‰€æœ‰ç»„ä»¶ã€‚
å‡½æ•°ï¼šå…¨å±€ä½œç”¨åŸŸ / if __name__ == "__main__":

è¾“å…¥ï¼šæ— ï¼ˆè„šæœ¬å¯åŠ¨æ—¶æ‰§è¡Œï¼‰
é€»è¾‘ï¼š

åˆå§‹åŒ–ï¼šåˆ›å»º Flask åº”ç”¨å®ä¾‹
CORS é…ç½®ï¼šåº”ç”¨ CORS(app) å…è®¸è·¨åŸŸè¯·æ±‚ã€‚è¿™å¾ˆå…³é”®ï¼Œå› ä¸ºå‰ç«¯å•ç‹¬æ‰˜ç®¡ï¼Œéœ€è¦æƒé™ä¸æ­¤ API é€šä¿¡
è“å›¾æ³¨å†Œï¼šæ³¨å†Œä¸‰ä¸ªä¸»è“å›¾ã€‚è“å›¾å¦‚åŒ"æ’ä»¶"ä¸ºåº”ç”¨æ·»åŠ ç‰¹å®šè·¯ç”±ï¼š

universities_bpï¼ˆåœ¨ /universitiesï¼‰
dropdown_bpï¼ˆåœ¨ /dropdownï¼‰
ranking_detail_bpï¼ˆåœ¨ /subject_rankingsï¼‰


å¯åŠ¨ï¼šåœ¨ç«¯å£ 10000 å¯åŠ¨å¼€å‘æœåŠ¡å™¨


è¾“å‡ºï¼šè¿è¡Œä¸­çš„ HTTP æœåŠ¡å™¨

from flask import Flask
from routes.universities import universities_bp
from routes.dropdown import dropdown_bp
from routes.ranking_detail import ranking_detail_bp
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

# æ³¨å†Œè“å›¾
app.register_blueprint(universities_bp, url_prefix="/universities")
app.register_blueprint(dropdown_bp, url_prefix="/dropdown")
app.register_blueprint(ranking_detail_bp, url_prefix="/subject_rankings")

if __name__ == "__main__":
    app.run(host=&#39;0.0.0.0&#39;, port=10000)

2. æ ¸å¿ƒé€»è¾‘ï¼šmodels/universities.py
è¿™ä¸ªæ–‡ä»¶åŒ…å«æœç´¢åŠŸèƒ½çš„"å¤§è„‘"ã€‚å¤„ç†å¤æ‚çš„æœç´¢ã€è¿‡æ»¤ã€æ’åºé€»è¾‘ã€‚'><meta name=author content><link rel=canonical href=https://xiaruize.org/zh/post/university-ranking-backend-part-1/><link crossorigin=anonymous href=/assets/css/stylesheet.e1f5c4cae44599655f7ff95195ff89c8cb3adbda94f2b1581a434ab2b4d4e6cf.css integrity="sha256-4fXEyuRFmWVff/lRlf+JyMs629qU8rFYGkNKsrTU5s8=" rel="preload stylesheet" as=style><link rel=icon href=https://xiaruize.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xiaruize.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xiaruize.org/favicon-32x32.png><link rel=apple-touch-icon href=https://xiaruize.org/apple-touch-icon.png><link rel=mask-icon href=https://xiaruize.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://xiaruize.org/post/university-ranking-backend-part-1/><link rel=alternate hreflang=zh href=https://xiaruize.org/zh/post/university-ranking-backend-part-1/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://xiaruize.org/zh/post/university-ranking-backend-part-1/"><meta property="og:site_name" content="xiaruize's Blog"><meta property="og:title" content="University Ranking Backendï¼šä»£ç æ·±åº¦è§£æï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰"><meta property="og:description" content='æœ¬ç¯‡å°†æ·±å…¥ University Ranking Backend çš„ä»£ç ç»“æ„ã€‚æˆ‘ä»¬æ¢ç´¢åº”ç”¨å…¥å£å’Œé©±åŠ¨å¤§å­¦æœç´¢è¿‡æ»¤ç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘ã€‚
ğŸ—ï¸ æ•´ä½“æ¶æ„ åç«¯éµå¾ªæ ‡å‡†çš„ æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ (MVC) æ¨¡å¼ï¼ˆå…¶ä¸­"è§†å›¾"æ˜¯ JSON å“åº”ï¼‰ã€‚
app.pyï¼šåˆå§‹åŒ–åº”ç”¨ã€æ³¨å†Œè·¯ç”±çš„å…¥å£ç‚¹ routes/ï¼šå¤„ç† HTTP è¯·æ±‚ã€è§£æå‚æ•°ã€å§”æ‰˜ç»™æ¨¡å‹ models/ï¼šåŒ…å«ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“äº¤äº’ db/ï¼šç®¡ç† SQLite æ•°æ®åº“è¿æ¥ 1. å…¥å£ç‚¹ï¼šapp.py è¿™ä¸ªæ–‡ä»¶æ˜¯åº”ç”¨çš„å¿ƒè„ã€‚å®ƒè®¾ç½® Flask æœåŠ¡å™¨ã€é…ç½®å®‰å…¨ï¼Œè¿æ¥æ‰€æœ‰ç»„ä»¶ã€‚
å‡½æ•°ï¼šå…¨å±€ä½œç”¨åŸŸ / if __name__ == "__main__": è¾“å…¥ï¼šæ— ï¼ˆè„šæœ¬å¯åŠ¨æ—¶æ‰§è¡Œï¼‰ é€»è¾‘ï¼š åˆå§‹åŒ–ï¼šåˆ›å»º Flask åº”ç”¨å®ä¾‹ CORS é…ç½®ï¼šåº”ç”¨ CORS(app) å…è®¸è·¨åŸŸè¯·æ±‚ã€‚è¿™å¾ˆå…³é”®ï¼Œå› ä¸ºå‰ç«¯å•ç‹¬æ‰˜ç®¡ï¼Œéœ€è¦æƒé™ä¸æ­¤ API é€šä¿¡ è“å›¾æ³¨å†Œï¼šæ³¨å†Œä¸‰ä¸ªä¸»è“å›¾ã€‚è“å›¾å¦‚åŒ"æ’ä»¶"ä¸ºåº”ç”¨æ·»åŠ ç‰¹å®šè·¯ç”±ï¼š universities_bpï¼ˆåœ¨ /universitiesï¼‰ dropdown_bpï¼ˆåœ¨ /dropdownï¼‰ ranking_detail_bpï¼ˆåœ¨ /subject_rankingsï¼‰ å¯åŠ¨ï¼šåœ¨ç«¯å£ 10000 å¯åŠ¨å¼€å‘æœåŠ¡å™¨ è¾“å‡ºï¼šè¿è¡Œä¸­çš„ HTTP æœåŠ¡å™¨ from flask import Flask from routes.universities import universities_bp from routes.dropdown import dropdown_bp from routes.ranking_detail import ranking_detail_bp from flask_cors import CORS app = Flask(__name__) CORS(app) # æ³¨å†Œè“å›¾ app.register_blueprint(universities_bp, url_prefix="/universities") app.register_blueprint(dropdown_bp, url_prefix="/dropdown") app.register_blueprint(ranking_detail_bp, url_prefix="/subject_rankings") if __name__ == "__main__": app.run(host=&#39;0.0.0.0&#39;, port=10000) 2. æ ¸å¿ƒé€»è¾‘ï¼šmodels/universities.py è¿™ä¸ªæ–‡ä»¶åŒ…å«æœç´¢åŠŸèƒ½çš„"å¤§è„‘"ã€‚å¤„ç†å¤æ‚çš„æœç´¢ã€è¿‡æ»¤ã€æ’åºé€»è¾‘ã€‚'><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-12-07T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-07T00:00:00+00:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="Flask"><meta property="article:tag" content="Backend"><meta property="article:tag" content="ä»£ç åˆ†æ"><meta name=twitter:card content="summary"><meta name=twitter:title content="University Ranking Backendï¼šä»£ç æ·±åº¦è§£æï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰"><meta name=twitter:description content='æœ¬ç¯‡å°†æ·±å…¥ University Ranking Backend çš„ä»£ç ç»“æ„ã€‚æˆ‘ä»¬æ¢ç´¢åº”ç”¨å…¥å£å’Œé©±åŠ¨å¤§å­¦æœç´¢è¿‡æ»¤ç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘ã€‚
ğŸ—ï¸ æ•´ä½“æ¶æ„
åç«¯éµå¾ªæ ‡å‡†çš„ æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ (MVC) æ¨¡å¼ï¼ˆå…¶ä¸­"è§†å›¾"æ˜¯ JSON å“åº”ï¼‰ã€‚

app.pyï¼šåˆå§‹åŒ–åº”ç”¨ã€æ³¨å†Œè·¯ç”±çš„å…¥å£ç‚¹
routes/ï¼šå¤„ç† HTTP è¯·æ±‚ã€è§£æå‚æ•°ã€å§”æ‰˜ç»™æ¨¡å‹
models/ï¼šåŒ…å«ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“äº¤äº’
db/ï¼šç®¡ç† SQLite æ•°æ®åº“è¿æ¥


1. å…¥å£ç‚¹ï¼šapp.py
è¿™ä¸ªæ–‡ä»¶æ˜¯åº”ç”¨çš„å¿ƒè„ã€‚å®ƒè®¾ç½® Flask æœåŠ¡å™¨ã€é…ç½®å®‰å…¨ï¼Œè¿æ¥æ‰€æœ‰ç»„ä»¶ã€‚
å‡½æ•°ï¼šå…¨å±€ä½œç”¨åŸŸ / if __name__ == "__main__":

è¾“å…¥ï¼šæ— ï¼ˆè„šæœ¬å¯åŠ¨æ—¶æ‰§è¡Œï¼‰
é€»è¾‘ï¼š

åˆå§‹åŒ–ï¼šåˆ›å»º Flask åº”ç”¨å®ä¾‹
CORS é…ç½®ï¼šåº”ç”¨ CORS(app) å…è®¸è·¨åŸŸè¯·æ±‚ã€‚è¿™å¾ˆå…³é”®ï¼Œå› ä¸ºå‰ç«¯å•ç‹¬æ‰˜ç®¡ï¼Œéœ€è¦æƒé™ä¸æ­¤ API é€šä¿¡
è“å›¾æ³¨å†Œï¼šæ³¨å†Œä¸‰ä¸ªä¸»è“å›¾ã€‚è“å›¾å¦‚åŒ"æ’ä»¶"ä¸ºåº”ç”¨æ·»åŠ ç‰¹å®šè·¯ç”±ï¼š

universities_bpï¼ˆåœ¨ /universitiesï¼‰
dropdown_bpï¼ˆåœ¨ /dropdownï¼‰
ranking_detail_bpï¼ˆåœ¨ /subject_rankingsï¼‰


å¯åŠ¨ï¼šåœ¨ç«¯å£ 10000 å¯åŠ¨å¼€å‘æœåŠ¡å™¨


è¾“å‡ºï¼šè¿è¡Œä¸­çš„ HTTP æœåŠ¡å™¨

from flask import Flask
from routes.universities import universities_bp
from routes.dropdown import dropdown_bp
from routes.ranking_detail import ranking_detail_bp
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

# æ³¨å†Œè“å›¾
app.register_blueprint(universities_bp, url_prefix="/universities")
app.register_blueprint(dropdown_bp, url_prefix="/dropdown")
app.register_blueprint(ranking_detail_bp, url_prefix="/subject_rankings")

if __name__ == "__main__":
    app.run(host=&#39;0.0.0.0&#39;, port=10000)

2. æ ¸å¿ƒé€»è¾‘ï¼šmodels/universities.py
è¿™ä¸ªæ–‡ä»¶åŒ…å«æœç´¢åŠŸèƒ½çš„"å¤§è„‘"ã€‚å¤„ç†å¤æ‚çš„æœç´¢ã€è¿‡æ»¤ã€æ’åºé€»è¾‘ã€‚'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://xiaruize.org/zh/post/"},{"@type":"ListItem","position":2,"name":"University Ranking Backendï¼šä»£ç æ·±åº¦è§£æï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰","item":"https://xiaruize.org/zh/post/university-ranking-backend-part-1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"University Ranking Backendï¼šä»£ç æ·±åº¦è§£æï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰","name":"University Ranking Backendï¼šä»£ç æ·±åº¦è§£æï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰","description":"æœ¬ç¯‡å°†æ·±å…¥ University Ranking Backend çš„ä»£ç ç»“æ„ã€‚æˆ‘ä»¬æ¢ç´¢åº”ç”¨å…¥å£å’Œé©±åŠ¨å¤§å­¦æœç´¢è¿‡æ»¤ç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘ã€‚\nğŸ—ï¸ æ•´ä½“æ¶æ„ åç«¯éµå¾ªæ ‡å‡†çš„ æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ (MVC) æ¨¡å¼ï¼ˆå…¶ä¸­\u0026quot;è§†å›¾\u0026quot;æ˜¯ JSON å“åº”ï¼‰ã€‚\napp.pyï¼šåˆå§‹åŒ–åº”ç”¨ã€æ³¨å†Œè·¯ç”±çš„å…¥å£ç‚¹ routes/ï¼šå¤„ç† HTTP è¯·æ±‚ã€è§£æå‚æ•°ã€å§”æ‰˜ç»™æ¨¡å‹ models/ï¼šåŒ…å«ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“äº¤äº’ db/ï¼šç®¡ç† SQLite æ•°æ®åº“è¿æ¥ 1. å…¥å£ç‚¹ï¼šapp.py è¿™ä¸ªæ–‡ä»¶æ˜¯åº”ç”¨çš„å¿ƒè„ã€‚å®ƒè®¾ç½® Flask æœåŠ¡å™¨ã€é…ç½®å®‰å…¨ï¼Œè¿æ¥æ‰€æœ‰ç»„ä»¶ã€‚\nå‡½æ•°ï¼šå…¨å±€ä½œç”¨åŸŸ / if __name__ == \u0026quot;__main__\u0026quot;: è¾“å…¥ï¼šæ— ï¼ˆè„šæœ¬å¯åŠ¨æ—¶æ‰§è¡Œï¼‰ é€»è¾‘ï¼š åˆå§‹åŒ–ï¼šåˆ›å»º Flask åº”ç”¨å®ä¾‹ CORS é…ç½®ï¼šåº”ç”¨ CORS(app) å…è®¸è·¨åŸŸè¯·æ±‚ã€‚è¿™å¾ˆå…³é”®ï¼Œå› ä¸ºå‰ç«¯å•ç‹¬æ‰˜ç®¡ï¼Œéœ€è¦æƒé™ä¸æ­¤ API é€šä¿¡ è“å›¾æ³¨å†Œï¼šæ³¨å†Œä¸‰ä¸ªä¸»è“å›¾ã€‚è“å›¾å¦‚åŒ\u0026quot;æ’ä»¶\u0026quot;ä¸ºåº”ç”¨æ·»åŠ ç‰¹å®šè·¯ç”±ï¼š universities_bpï¼ˆåœ¨ /universitiesï¼‰ dropdown_bpï¼ˆåœ¨ /dropdownï¼‰ ranking_detail_bpï¼ˆåœ¨ /subject_rankingsï¼‰ å¯åŠ¨ï¼šåœ¨ç«¯å£ 10000 å¯åŠ¨å¼€å‘æœåŠ¡å™¨ è¾“å‡ºï¼šè¿è¡Œä¸­çš„ HTTP æœåŠ¡å™¨ from flask import Flask from routes.universities import universities_bp from routes.dropdown import dropdown_bp from routes.ranking_detail import ranking_detail_bp from flask_cors import CORS app = Flask(__name__) CORS(app) # æ³¨å†Œè“å›¾ app.register_blueprint(universities_bp, url_prefix=\u0026#34;/universities\u0026#34;) app.register_blueprint(dropdown_bp, url_prefix=\u0026#34;/dropdown\u0026#34;) app.register_blueprint(ranking_detail_bp, url_prefix=\u0026#34;/subject_rankings\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: app.run(host=\u0026#39;0.0.0.0\u0026#39;, port=10000) 2. æ ¸å¿ƒé€»è¾‘ï¼šmodels/universities.py è¿™ä¸ªæ–‡ä»¶åŒ…å«æœç´¢åŠŸèƒ½çš„\u0026quot;å¤§è„‘\u0026quot;ã€‚å¤„ç†å¤æ‚çš„æœç´¢ã€è¿‡æ»¤ã€æ’åºé€»è¾‘ã€‚\n","keywords":["Python","Flask","Backend","ä»£ç åˆ†æ"],"articleBody":"æœ¬ç¯‡å°†æ·±å…¥ University Ranking Backend çš„ä»£ç ç»“æ„ã€‚æˆ‘ä»¬æ¢ç´¢åº”ç”¨å…¥å£å’Œé©±åŠ¨å¤§å­¦æœç´¢è¿‡æ»¤ç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘ã€‚\nğŸ—ï¸ æ•´ä½“æ¶æ„ åç«¯éµå¾ªæ ‡å‡†çš„ æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ (MVC) æ¨¡å¼ï¼ˆå…¶ä¸­\"è§†å›¾\"æ˜¯ JSON å“åº”ï¼‰ã€‚\napp.pyï¼šåˆå§‹åŒ–åº”ç”¨ã€æ³¨å†Œè·¯ç”±çš„å…¥å£ç‚¹ routes/ï¼šå¤„ç† HTTP è¯·æ±‚ã€è§£æå‚æ•°ã€å§”æ‰˜ç»™æ¨¡å‹ models/ï¼šåŒ…å«ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“äº¤äº’ db/ï¼šç®¡ç† SQLite æ•°æ®åº“è¿æ¥ 1. å…¥å£ç‚¹ï¼šapp.py è¿™ä¸ªæ–‡ä»¶æ˜¯åº”ç”¨çš„å¿ƒè„ã€‚å®ƒè®¾ç½® Flask æœåŠ¡å™¨ã€é…ç½®å®‰å…¨ï¼Œè¿æ¥æ‰€æœ‰ç»„ä»¶ã€‚\nå‡½æ•°ï¼šå…¨å±€ä½œç”¨åŸŸ / if __name__ == \"__main__\": è¾“å…¥ï¼šæ— ï¼ˆè„šæœ¬å¯åŠ¨æ—¶æ‰§è¡Œï¼‰ é€»è¾‘ï¼š åˆå§‹åŒ–ï¼šåˆ›å»º Flask åº”ç”¨å®ä¾‹ CORS é…ç½®ï¼šåº”ç”¨ CORS(app) å…è®¸è·¨åŸŸè¯·æ±‚ã€‚è¿™å¾ˆå…³é”®ï¼Œå› ä¸ºå‰ç«¯å•ç‹¬æ‰˜ç®¡ï¼Œéœ€è¦æƒé™ä¸æ­¤ API é€šä¿¡ è“å›¾æ³¨å†Œï¼šæ³¨å†Œä¸‰ä¸ªä¸»è“å›¾ã€‚è“å›¾å¦‚åŒ\"æ’ä»¶\"ä¸ºåº”ç”¨æ·»åŠ ç‰¹å®šè·¯ç”±ï¼š universities_bpï¼ˆåœ¨ /universitiesï¼‰ dropdown_bpï¼ˆåœ¨ /dropdownï¼‰ ranking_detail_bpï¼ˆåœ¨ /subject_rankingsï¼‰ å¯åŠ¨ï¼šåœ¨ç«¯å£ 10000 å¯åŠ¨å¼€å‘æœåŠ¡å™¨ è¾“å‡ºï¼šè¿è¡Œä¸­çš„ HTTP æœåŠ¡å™¨ from flask import Flask from routes.universities import universities_bp from routes.dropdown import dropdown_bp from routes.ranking_detail import ranking_detail_bp from flask_cors import CORS app = Flask(__name__) CORS(app) # æ³¨å†Œè“å›¾ app.register_blueprint(universities_bp, url_prefix=\"/universities\") app.register_blueprint(dropdown_bp, url_prefix=\"/dropdown\") app.register_blueprint(ranking_detail_bp, url_prefix=\"/subject_rankings\") if __name__ == \"__main__\": app.run(host='0.0.0.0', port=10000) 2. æ ¸å¿ƒé€»è¾‘ï¼šmodels/universities.py è¿™ä¸ªæ–‡ä»¶åŒ…å«æœç´¢åŠŸèƒ½çš„\"å¤§è„‘\"ã€‚å¤„ç†å¤æ‚çš„æœç´¢ã€è¿‡æ»¤ã€æ’åºé€»è¾‘ã€‚\nå‡½æ•°ï¼šfilter_universities è¿™æ˜¯æ•´ä¸ªé¡¹ç›®æœ€å…³é”®çš„å‡½æ•°ã€‚æ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€æ„å»º SQL æŸ¥è¯¢ã€‚\nè¾“å…¥ï¼š\nqueryï¼šæœç´¢å…³é”®è¯ï¼ˆå¦‚\"Harvard\"ï¼‰ sort_creditï¼šç”¨äºæ’åºçš„æ’åè¡¨ï¼ˆé»˜è®¤ï¼šâ€œUS News Globalâ€ï¼‰ countryï¼šæŒ‰å›½å®¶è¿‡æ»¤ cityï¼šæŒ‰åŸå¸‚è¿‡æ»¤ é€»è¾‘ï¼š\næ•°æ®åº“è¿æ¥ï¼šè¿æ¥åˆ° SQLite æ•°æ®åº“ åŠ¨æ€è¡¨é€‰æ‹©ï¼ˆâ€œæ™ºèƒ½\"éƒ¨åˆ†ï¼‰ï¼š é»˜è®¤ä¸ºå…¨çƒæ’åè¡¨ æ™ºèƒ½ç‰¹æ€§ï¼šç”¨æˆ·é€‰æ‹©å›½å®¶æ—¶ï¼ˆå¦‚\"Chinaâ€ï¼‰ï¼Œä»£ç æ£€æŸ¥è¯¥å›½æ˜¯å¦æœ‰ä¸“ç”¨è¡¨ï¼ˆå¦‚ US_News_best global universities in china_Rankingsï¼‰ã€‚è‹¥æœ‰ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°è¯¥è¡¨è·æ›´ç²¾å‡†çš„æœ¬åœ°æ’å æŸ¥è¯¢æ„å»ºï¼š ä»åŸºç¡€ SQL å¼€å§‹ï¼Œé€‰æ‹©å¤§å­¦è¯¦æƒ… ä¸é€‰å®šæ’åè¡¨ LEFT JOIN è·å– rank_value è¿‡æ»¤ï¼šä¸ºæœç´¢è¯ã€å›½å®¶ã€åŸå¸‚æ·»åŠ  WHERE å­å¥ æ’åºï¼šæŒ‰ rank_valueï¼ˆå‡åºï¼‰æ’åˆ—ï¼Œ#1 å¤§å­¦æœ€å…ˆå‡ºç° è¾“å‡ºï¼šå­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸ä»£è¡¨ä¸€æ‰€å¤§å­¦åŠå…¶æ’åä¿¡æ¯\ndef filter_universities(query=None, sort_credit=None, country=None, city=None): conn = get_db_connection() if sort_credit is None: sort_credit = \"US_News_best global universities_Rankings\" # æ™ºèƒ½é€»è¾‘ï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨å›½å®¶ç‰¹å®šæ’åè¡¨ join_table = sort_credit if country: candidate_country = country.lower().strip() candidate_table = f\"US_News_best global universities in {candidate_country}_Rankings\" try: cur = conn.execute(\"SELECT name FROM sqlite_master WHERE type='table' AND name=?\", (candidate_table,)) if cur.fetchone(): join_table = candidate_table except Exception: join_table = sort_credit # åŸºç¡€æŸ¥è¯¢ sql = \"\"\" SELECT Universities.id, Universities.normalized_name, Universities.name, Universities.country, Universities.city, Universities.photo, R.rank_value, T.chinese_name FROM Universities LEFT JOIN University_names_en_to_zh AS T ON Universities.id = T.id \"\"\" # åŠ¨æ€è”æ¥ if join_table: sql += f\"\"\" LEFT JOIN \"{join_table}\" AS R ON Universities.normalized_name = R.normalized_name \"\"\" # ... (æœç´¢è¯ã€å›½å®¶ã€åŸå¸‚çš„è¿‡æ»¤é€»è¾‘) ... sql += \" ORDER BY R.rank_value ASC NULLS LAST LIMIT 200\" cursor = conn.execute(sql, params) return [dict(row) for row in cursor.fetchall()] 3. API å±‚ï¼šroutes/universities.py è¿™ä¸ªæ–‡ä»¶å……å½“\"æ¥å¾…å‘˜\"ã€‚æ¥æ”¶ç½‘ç»œè¯·æ±‚å¹¶ä¼ é€’ç»™æ¨¡å‹ã€‚\nå‡½æ•°ï¼šfilter_universities_route (GET /universities/filter) è¾“å…¥ï¼šURL æŸ¥è¯¢å‚æ•°ï¼ˆqueryã€sort_creditã€countryã€cityï¼‰ é€»è¾‘ï¼š ä»è¯·æ±‚ä¸­æå–è¿™äº›å‚æ•° è°ƒç”¨ models.universities.filter_universities å‡½æ•° å°†ç»“æœåŒ…è£…ä¸º JSON å“åº” è¾“å‡ºï¼šè¿‡æ»¤åçš„å¤§å­¦ JSON åˆ—è¡¨ @universities_bp.route(\"/filter\", methods=[\"GET\"]) def filter_universities_route(): query = request.args.get(\"query\") sort_credit = request.args.get(\"sort_credit\") country = request.args.get(\"country\") city = request.args.get(\"city\") results = filter_universities(query, sort_credit, country, city) return jsonify(results) å‡½æ•°ï¼šget_university (GET /universities/) è¾“å…¥ï¼šæ¥è‡ª URL çš„ univ_idï¼ˆæ•´æ•°ï¼‰ é€»è¾‘ï¼š ä½¿ç”¨ ID è·å–å•ä¸ªå¤§å­¦çš„å®Œæ•´èµ„æ–™ æ£€æŸ¥å¤§å­¦æ˜¯å¦å­˜åœ¨ è¾“å‡ºï¼šå¤§å­¦èµ„æ–™ JSON å¯¹è±¡ï¼Œè‹¥æœªæ‰¾åˆ°åˆ™è¿”å› 404 é”™è¯¯ @universities_bp.route(\"/\", methods=[\"GET\"]) def get_university(univ_id): from models.university import get_university_by_id result = get_university_by_id(univ_id) if result: return jsonify(result) return jsonify({\"error\": \"University not found\"}), 404 ğŸŒŠ Vibe Coding è§†è§’ ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæœ‰äº›æœ‰è¶£çš„æ¨¡å¼ï¼Œå®ƒä»¬é€šè¿‡ â€œVibe Codingâ€ï¼ˆAI è¾…åŠ©å¼€å‘ï¼‰å®ç°ã€‚AI å¸®åŠ©è¯†åˆ«è¿™äº›æ¨¡å¼å¹¶ä¼˜åŒ–ï¼Œå®ç°æµç•…ã€é€‚åº”æ€§å¼ºçš„è®¾è®¡ã€‚\næ™ºèƒ½å›é€€ä¸è‡ªåŠ¨å‘ç°ï¼š åœ¨ filter_universities ä¸­ï¼Œæˆ‘ä»¬ä¸ç¡¬ç¼–ç æ”¯æŒçš„å›½å®¶æˆ–æ’åè¡¨åˆ—è¡¨ã€‚åªæ˜¯è¯¢é—®æ•°æ®åº“ï¼Œâ€œä½ æœ‰è¿™å¼ è¡¨å—ï¼Ÿâ€ (SELECT name FROM sqlite_master...)\nAI è¾…åŠ©è®¾è®¡ï¼šå€ŸåŠ© AI ååŠ©ï¼Œæˆ‘ä»¬å¿«é€Ÿæ¢ç´¢å¹¶å®ç°äº†åŠ¨æ€å‘ç°æ¨¡å¼ã€‚AI å¸®åŠ©è¯†åˆ«æŸ¥è¯¢ sqlite_master æ¯”ç®¡ç†é…ç½®æ–‡ä»¶æ›´æ˜“ç»´æŠ¤ã€‚æ˜å¤©è‹¥æŠ“å–æ–°å›½å®¶æ•°æ®ï¼ˆå¦‚\"ç«æ˜Ÿæœ€ä½³å¤§å­¦\"ï¼‰ï¼Œåªéœ€å°†è¡¨æ”¾å…¥ SQLiteï¼ŒAPI è‡ªåŠ¨å¯ç”¨å®ƒï¼Œæ— éœ€æ”¹åŠ¨ä¸€è¡Œä»£ç ã€‚ å»¶è¿Ÿå¯¼å…¥ï¼š åœ¨ routes/universities.py ä¸­ï¼Œä½ ä¼šçœ‹åˆ°å¯¼å…¥ åœ¨ å‡½æ•°å†…éƒ¨ï¼ˆå¦‚ from models.university import get_university_by_idï¼‰\nAI è¾…åŠ©æ¨¡å¼ï¼šAI å»ºè®®è¿™ä¸ªæ¨¡å¼é¿å…å¸¸å›°æ‰° Flask åº”ç”¨çš„å¾ªç¯ä¾èµ–ã€‚è¿™ç§æ–¹æ³•ç» AI ä¼˜åŒ–åï¼Œè®©å¼€å‘è€…å¿«é€Ÿè¿­ä»£ã€é‡æ„æ–‡ä»¶ã€å¤åˆ¶ç²˜è´´é€»è¾‘ï¼Œä¸ä¼šç ´ååº”ç”¨åˆå§‹åŒ–ã€‚è¿™æ˜¯å…³äºå‡å°‘å¼€å‘æ‘©æ“¦ã€æå‡ä»£ç åº“å¯ç»´æŠ¤æ€§ã€‚ 4. å®ç”¨è·¯ç”±ï¼šroutes/dropdown.py è¿™äº›å‡½æ•°é€šè¿‡æä¾›é€‰é¡¹åˆ—è¡¨å¸®åŠ©å‰ç«¯æ„å»º UIã€‚\nå‡½æ•°ï¼šget_countries (GET /dropdown/countries) è¾“å…¥ï¼šæ—  é€»è¾‘ï¼šæ‰«ææ•°æ®åº“æŸ¥æ‰¾æ‰€æœ‰å›½å®¶ è¾“å‡ºï¼šå›½å®¶åç§° JSON åˆ—è¡¨ï¼ˆå¦‚ [\"USA\", \"China\", \"UK\", ...]ï¼‰ @dropdown_bp.route('/countries', methods=['GET']) def get_countries(): from models.countries import get_countries_db countries = get_countries_db() return countries å‡½æ•°ï¼šget_ranking_options (GET /dropdown/ranking_options) è¾“å…¥ï¼šå¯é€‰è¿‡æ»¤å™¨å¦‚ source æˆ– subject é€»è¾‘ï¼šè¿”å›å¯ç”¨æ’åè¡¨çš„å…ƒæ•°æ®ã€‚å‘Šè¯‰å‰ç«¯åœ¨\"æ’åºæ–¹å¼\"ä¸‹æ‹‰èœå•æ˜¾ç¤ºä»€ä¹ˆé€‰é¡¹ è¾“å‡ºï¼šæ’åç±»åˆ« JSON åˆ—è¡¨ @dropdown_bp.route('/ranking_options', methods=['GET']) def get_ranking_options(): start_time = time() source = request.args.get('source') subject = request.args.get('subject') from models.ranking_options import ranking_options tables = ranking_options(source, subject) end_time = time() duration = end_time - start_time print(f\"Duration: {duration} seconds\") return jsonify(tables) ","wordCount":"459","inLanguage":"zh","datePublished":"2025-12-07T00:00:00Z","dateModified":"2025-12-07T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://xiaruize.org/zh/post/university-ranking-backend-part-1/"},"publisher":{"@type":"Organization","name":"xiaruize's Blog","logo":{"@type":"ImageObject","url":"https://xiaruize.org/favicon.ico"}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css integrity=sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js integrity=sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js integrity=sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"\\[",right:"\\]",display:!0},{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1}],throwOnError:!0})})</script></head><body id="
    top"><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xiaruize.org/zh/ accesskey=h title="xiaruize's Blog (Alt + H)">xiaruize's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://xiaruize.org/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://xiaruize.org/zh/categories/ title=categories><span>categories</span></a></li><li><a href=https://xiaruize.org/zh/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">University Ranking Backendï¼šä»£ç æ·±åº¦è§£æï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰</h1><div class=post-meta><span title='2025-12-07 00:00:00 +0000 UTC'>2025å¹´12æœˆ7æ—¥</span>&nbsp;|&nbsp;è¯­è¨€:<ul class=i18n_list><li><a href=https://xiaruize.org/post/university-ranking-backend-part-1/>En</a></li></ul></div></header><div class=post-content><p>æœ¬ç¯‡å°†æ·±å…¥ <strong>University Ranking Backend</strong> çš„ä»£ç ç»“æ„ã€‚æˆ‘ä»¬æ¢ç´¢åº”ç”¨å…¥å£å’Œé©±åŠ¨å¤§å­¦æœç´¢è¿‡æ»¤ç³»ç»Ÿçš„æ ¸å¿ƒé€»è¾‘ã€‚</p><h2 id=-æ•´ä½“æ¶æ„>ğŸ—ï¸ æ•´ä½“æ¶æ„<a hidden class=anchor aria-hidden=true href=#-æ•´ä½“æ¶æ„>#</a></h2><p>åç«¯éµå¾ªæ ‡å‡†çš„ <strong>æ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ (MVC)</strong> æ¨¡å¼ï¼ˆå…¶ä¸­"è§†å›¾"æ˜¯ JSON å“åº”ï¼‰ã€‚</p><ul><li><strong><code>app.py</code></strong>ï¼šåˆå§‹åŒ–åº”ç”¨ã€æ³¨å†Œè·¯ç”±çš„å…¥å£ç‚¹</li><li><strong><code>routes/</code></strong>ï¼šå¤„ç† HTTP è¯·æ±‚ã€è§£æå‚æ•°ã€å§”æ‰˜ç»™æ¨¡å‹</li><li><strong><code>models/</code></strong>ï¼šåŒ…å«ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“äº¤äº’</li><li><strong><code>db/</code></strong>ï¼šç®¡ç† SQLite æ•°æ®åº“è¿æ¥</li></ul><hr><h2 id=1-å…¥å£ç‚¹apppy>1. å…¥å£ç‚¹ï¼š<code>app.py</code><a hidden class=anchor aria-hidden=true href=#1-å…¥å£ç‚¹apppy>#</a></h2><p>è¿™ä¸ªæ–‡ä»¶æ˜¯åº”ç”¨çš„å¿ƒè„ã€‚å®ƒè®¾ç½® Flask æœåŠ¡å™¨ã€é…ç½®å®‰å…¨ï¼Œè¿æ¥æ‰€æœ‰ç»„ä»¶ã€‚</p><h3 id=å‡½æ•°å…¨å±€ä½œç”¨åŸŸ--if-__name__--__main__>å‡½æ•°ï¼šå…¨å±€ä½œç”¨åŸŸ / <code>if __name__ == "__main__":</code><a hidden class=anchor aria-hidden=true href=#å‡½æ•°å…¨å±€ä½œç”¨åŸŸ--if-__name__--__main__>#</a></h3><ul><li><strong>è¾“å…¥</strong>ï¼šæ— ï¼ˆè„šæœ¬å¯åŠ¨æ—¶æ‰§è¡Œï¼‰</li><li><strong>é€»è¾‘</strong>ï¼š<ol><li><strong>åˆå§‹åŒ–</strong>ï¼šåˆ›å»º <code>Flask</code> åº”ç”¨å®ä¾‹</li><li><strong>CORS é…ç½®</strong>ï¼šåº”ç”¨ <code>CORS(app)</code> å…è®¸è·¨åŸŸè¯·æ±‚ã€‚è¿™å¾ˆå…³é”®ï¼Œå› ä¸ºå‰ç«¯å•ç‹¬æ‰˜ç®¡ï¼Œéœ€è¦æƒé™ä¸æ­¤ API é€šä¿¡</li><li><strong>è“å›¾æ³¨å†Œ</strong>ï¼šæ³¨å†Œä¸‰ä¸ªä¸»è“å›¾ã€‚è“å›¾å¦‚åŒ"æ’ä»¶"ä¸ºåº”ç”¨æ·»åŠ ç‰¹å®šè·¯ç”±ï¼š<ul><li><code>universities_bp</code>ï¼ˆåœ¨ <code>/universities</code>ï¼‰</li><li><code>dropdown_bp</code>ï¼ˆåœ¨ <code>/dropdown</code>ï¼‰</li><li><code>ranking_detail_bp</code>ï¼ˆåœ¨ <code>/subject_rankings</code>ï¼‰</li></ul></li><li><strong>å¯åŠ¨</strong>ï¼šåœ¨ç«¯å£ 10000 å¯åŠ¨å¼€å‘æœåŠ¡å™¨</li></ol></li><li><strong>è¾“å‡º</strong>ï¼šè¿è¡Œä¸­çš„ HTTP æœåŠ¡å™¨</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask</span> <span class=kn>import</span> <span class=n>Flask</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>routes.universities</span> <span class=kn>import</span> <span class=n>universities_bp</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>routes.dropdown</span> <span class=kn>import</span> <span class=n>dropdown_bp</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>routes.ranking_detail</span> <span class=kn>import</span> <span class=n>ranking_detail_bp</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>flask_cors</span> <span class=kn>import</span> <span class=n>CORS</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>app</span> <span class=o>=</span> <span class=n>Flask</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>CORS</span><span class=p>(</span><span class=n>app</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ³¨å†Œè“å›¾</span>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=o>.</span><span class=n>register_blueprint</span><span class=p>(</span><span class=n>universities_bp</span><span class=p>,</span> <span class=n>url_prefix</span><span class=o>=</span><span class=s2>&#34;/universities&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=o>.</span><span class=n>register_blueprint</span><span class=p>(</span><span class=n>dropdown_bp</span><span class=p>,</span> <span class=n>url_prefix</span><span class=o>=</span><span class=s2>&#34;/dropdown&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>app</span><span class=o>.</span><span class=n>register_blueprint</span><span class=p>(</span><span class=n>ranking_detail_bp</span><span class=p>,</span> <span class=n>url_prefix</span><span class=o>=</span><span class=s2>&#34;/subject_rankings&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>app</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>host</span><span class=o>=</span><span class=s1>&#39;0.0.0.0&#39;</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=mi>10000</span><span class=p>)</span>
</span></span></code></pre></div><hr><h2 id=2-æ ¸å¿ƒé€»è¾‘modelsuniversitiespy>2. æ ¸å¿ƒé€»è¾‘ï¼š<code>models/universities.py</code><a hidden class=anchor aria-hidden=true href=#2-æ ¸å¿ƒé€»è¾‘modelsuniversitiespy>#</a></h2><p>è¿™ä¸ªæ–‡ä»¶åŒ…å«æœç´¢åŠŸèƒ½çš„"å¤§è„‘"ã€‚å¤„ç†å¤æ‚çš„æœç´¢ã€è¿‡æ»¤ã€æ’åºé€»è¾‘ã€‚</p><h3 id=å‡½æ•°filter_universities>å‡½æ•°ï¼š<code>filter_universities</code><a hidden class=anchor aria-hidden=true href=#å‡½æ•°filter_universities>#</a></h3><p>è¿™æ˜¯æ•´ä¸ªé¡¹ç›®æœ€å…³é”®çš„å‡½æ•°ã€‚æ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€æ„å»º SQL æŸ¥è¯¢ã€‚</p><ul><li><p><strong>è¾“å…¥</strong>ï¼š</p><ul><li><code>query</code>ï¼šæœç´¢å…³é”®è¯ï¼ˆå¦‚"Harvard"ï¼‰</li><li><code>sort_credit</code>ï¼šç”¨äºæ’åºçš„æ’åè¡¨ï¼ˆé»˜è®¤ï¼š&ldquo;US News Global&rdquo;ï¼‰</li><li><code>country</code>ï¼šæŒ‰å›½å®¶è¿‡æ»¤</li><li><code>city</code>ï¼šæŒ‰åŸå¸‚è¿‡æ»¤</li></ul></li><li><p><strong>é€»è¾‘</strong>ï¼š</p><ol><li><strong>æ•°æ®åº“è¿æ¥</strong>ï¼šè¿æ¥åˆ° SQLite æ•°æ®åº“</li><li><strong>åŠ¨æ€è¡¨é€‰æ‹©ï¼ˆ&ldquo;æ™ºèƒ½"éƒ¨åˆ†ï¼‰</strong>ï¼š<ul><li>é»˜è®¤ä¸ºå…¨çƒæ’åè¡¨</li><li><strong>æ™ºèƒ½ç‰¹æ€§</strong>ï¼šç”¨æˆ·é€‰æ‹©å›½å®¶æ—¶ï¼ˆå¦‚"China&rdquo;ï¼‰ï¼Œä»£ç æ£€æŸ¥è¯¥å›½æ˜¯å¦æœ‰ä¸“ç”¨è¡¨ï¼ˆå¦‚ <code>US_News_best global universities in china_Rankings</code>ï¼‰ã€‚è‹¥æœ‰ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°è¯¥è¡¨è·æ›´ç²¾å‡†çš„æœ¬åœ°æ’å</li></ul></li><li><strong>æŸ¥è¯¢æ„å»º</strong>ï¼š<ul><li>ä»åŸºç¡€ SQL å¼€å§‹ï¼Œé€‰æ‹©å¤§å­¦è¯¦æƒ…</li><li>ä¸é€‰å®šæ’åè¡¨ <code>LEFT JOIN</code> è·å– <code>rank_value</code></li></ul></li><li><strong>è¿‡æ»¤</strong>ï¼šä¸ºæœç´¢è¯ã€å›½å®¶ã€åŸå¸‚æ·»åŠ  <code>WHERE</code> å­å¥</li><li><strong>æ’åº</strong>ï¼šæŒ‰ <code>rank_value</code>ï¼ˆå‡åºï¼‰æ’åˆ—ï¼Œ#1 å¤§å­¦æœ€å…ˆå‡ºç°</li></ol></li><li><p><strong>è¾“å‡º</strong>ï¼šå­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸ä»£è¡¨ä¸€æ‰€å¤§å­¦åŠå…¶æ’åä¿¡æ¯</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>filter_universities</span><span class=p>(</span><span class=n>query</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>sort_credit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>country</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>city</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span> <span class=o>=</span> <span class=n>get_db_connection</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>sort_credit</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>sort_credit</span> <span class=o>=</span> <span class=s2>&#34;US_News_best global universities_Rankings&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># æ™ºèƒ½é€»è¾‘ï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨å›½å®¶ç‰¹å®šæ’åè¡¨</span>
</span></span><span class=line><span class=cl>    <span class=n>join_table</span> <span class=o>=</span> <span class=n>sort_credit</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>country</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>candidate_country</span> <span class=o>=</span> <span class=n>country</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>candidate_table</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;US_News_best global universities in </span><span class=si>{</span><span class=n>candidate_country</span><span class=si>}</span><span class=s2>_Rankings&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>cur</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=s2>&#34;SELECT name FROM sqlite_master WHERE type=&#39;table&#39; AND name=?&#34;</span><span class=p>,</span> <span class=p>(</span><span class=n>candidate_table</span><span class=p>,))</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>cur</span><span class=o>.</span><span class=n>fetchone</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=n>join_table</span> <span class=o>=</span> <span class=n>candidate_table</span>
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>join_table</span> <span class=o>=</span> <span class=n>sort_credit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># åŸºç¡€æŸ¥è¯¢</span>
</span></span><span class=line><span class=cl>    <span class=n>sql</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        SELECT Universities.id, Universities.normalized_name, Universities.name,
</span></span></span><span class=line><span class=cl><span class=s2>               Universities.country, Universities.city, Universities.photo,
</span></span></span><span class=line><span class=cl><span class=s2>               R.rank_value, T.chinese_name
</span></span></span><span class=line><span class=cl><span class=s2>        FROM Universities
</span></span></span><span class=line><span class=cl><span class=s2>        LEFT JOIN University_names_en_to_zh AS T ON Universities.id = T.id
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># åŠ¨æ€è”æ¥</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>join_table</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>sql</span> <span class=o>+=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            LEFT JOIN &#34;</span><span class=si>{</span><span class=n>join_table</span><span class=si>}</span><span class=s2>&#34; AS R
</span></span></span><span class=line><span class=cl><span class=s2>            ON Universities.normalized_name = R.normalized_name
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># ... (æœç´¢è¯ã€å›½å®¶ã€åŸå¸‚çš„è¿‡æ»¤é€»è¾‘) ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>sql</span> <span class=o>+=</span> <span class=s2>&#34; ORDER BY R.rank_value ASC NULLS LAST LIMIT 200&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>cursor</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>sql</span><span class=p>,</span> <span class=n>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=nb>dict</span><span class=p>(</span><span class=n>row</span><span class=p>)</span> <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchall</span><span class=p>()]</span>
</span></span></code></pre></div><hr><h2 id=3-api-å±‚routesuniversitiespy>3. API å±‚ï¼š<code>routes/universities.py</code><a hidden class=anchor aria-hidden=true href=#3-api-å±‚routesuniversitiespy>#</a></h2><p>è¿™ä¸ªæ–‡ä»¶å……å½“"æ¥å¾…å‘˜"ã€‚æ¥æ”¶ç½‘ç»œè¯·æ±‚å¹¶ä¼ é€’ç»™æ¨¡å‹ã€‚</p><h3 id=å‡½æ•°filter_universities_route-get-universitiesfilter>å‡½æ•°ï¼š<code>filter_universities_route</code> (<code>GET /universities/filter</code>)<a hidden class=anchor aria-hidden=true href=#å‡½æ•°filter_universities_route-get-universitiesfilter>#</a></h3><ul><li><strong>è¾“å…¥</strong>ï¼šURL æŸ¥è¯¢å‚æ•°ï¼ˆ<code>query</code>ã€<code>sort_credit</code>ã€<code>country</code>ã€<code>city</code>ï¼‰</li><li><strong>é€»è¾‘</strong>ï¼š<ol><li>ä»è¯·æ±‚ä¸­æå–è¿™äº›å‚æ•°</li><li>è°ƒç”¨ <code>models.universities.filter_universities</code> å‡½æ•°</li><li>å°†ç»“æœåŒ…è£…ä¸º JSON å“åº”</li></ol></li><li><strong>è¾“å‡º</strong>ï¼šè¿‡æ»¤åçš„å¤§å­¦ JSON åˆ—è¡¨</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@universities_bp.route</span><span class=p>(</span><span class=s2>&#34;/filter&#34;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>filter_universities_route</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>query</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;query&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>sort_credit</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;sort_credit&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>country</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;country&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>city</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;city&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>results</span> <span class=o>=</span> <span class=n>filter_universities</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=n>sort_credit</span><span class=p>,</span> <span class=n>country</span><span class=p>,</span> <span class=n>city</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>results</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=å‡½æ•°get_university-get-universitiesintuniv_id>å‡½æ•°ï¼š<code>get_university</code> (<code>GET /universities/&lt;int:univ_id></code>)<a hidden class=anchor aria-hidden=true href=#å‡½æ•°get_university-get-universitiesintuniv_id>#</a></h3><ul><li><strong>è¾“å…¥</strong>ï¼šæ¥è‡ª URL çš„ <code>univ_id</code>ï¼ˆæ•´æ•°ï¼‰</li><li><strong>é€»è¾‘</strong>ï¼š<ol><li>ä½¿ç”¨ ID è·å–å•ä¸ªå¤§å­¦çš„å®Œæ•´èµ„æ–™</li><li>æ£€æŸ¥å¤§å­¦æ˜¯å¦å­˜åœ¨</li></ol></li><li><strong>è¾“å‡º</strong>ï¼šå¤§å­¦èµ„æ–™ JSON å¯¹è±¡ï¼Œè‹¥æœªæ‰¾åˆ°åˆ™è¿”å› 404 é”™è¯¯</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@universities_bp.route</span><span class=p>(</span><span class=s2>&#34;/&lt;int:univ_id&gt;&#34;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_university</span><span class=p>(</span><span class=n>univ_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=kn>from</span> <span class=nn>models.university</span> <span class=kn>import</span> <span class=n>get_university_by_id</span>
</span></span><span class=line><span class=cl>    <span class=n>result</span> <span class=o>=</span> <span class=n>get_university_by_id</span><span class=p>(</span><span class=n>univ_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>result</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>jsonify</span><span class=p>({</span><span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;University not found&#34;</span><span class=p>}),</span> <span class=mi>404</span>
</span></span></code></pre></div><hr><h2 id=-vibe-coding-è§†è§’>ğŸŒŠ Vibe Coding è§†è§’<a hidden class=anchor aria-hidden=true href=#-vibe-coding-è§†è§’>#</a></h2><p>ä½ å¯èƒ½æ³¨æ„åˆ°è¿™é‡Œæœ‰äº›æœ‰è¶£çš„æ¨¡å¼ï¼Œå®ƒä»¬é€šè¿‡ <strong>&ldquo;Vibe Coding&rdquo;</strong>ï¼ˆAI è¾…åŠ©å¼€å‘ï¼‰å®ç°ã€‚AI å¸®åŠ©è¯†åˆ«è¿™äº›æ¨¡å¼å¹¶ä¼˜åŒ–ï¼Œå®ç°æµç•…ã€é€‚åº”æ€§å¼ºçš„è®¾è®¡ã€‚</p><ol><li><p><strong>æ™ºèƒ½å›é€€ä¸è‡ªåŠ¨å‘ç°</strong>ï¼š
åœ¨ <code>filter_universities</code> ä¸­ï¼Œæˆ‘ä»¬ä¸ç¡¬ç¼–ç æ”¯æŒçš„å›½å®¶æˆ–æ’åè¡¨åˆ—è¡¨ã€‚åªæ˜¯è¯¢é—®æ•°æ®åº“ï¼Œ<em>&ldquo;ä½ æœ‰è¿™å¼ è¡¨å—ï¼Ÿ&rdquo;</em> (<code>SELECT name FROM sqlite_master...</code>)</p><ul><li><strong>AI è¾…åŠ©è®¾è®¡</strong>ï¼šå€ŸåŠ© AI ååŠ©ï¼Œæˆ‘ä»¬å¿«é€Ÿæ¢ç´¢å¹¶å®ç°äº†åŠ¨æ€å‘ç°æ¨¡å¼ã€‚AI å¸®åŠ©è¯†åˆ«æŸ¥è¯¢ <code>sqlite_master</code> æ¯”ç®¡ç†é…ç½®æ–‡ä»¶æ›´æ˜“ç»´æŠ¤ã€‚æ˜å¤©è‹¥æŠ“å–æ–°å›½å®¶æ•°æ®ï¼ˆå¦‚"ç«æ˜Ÿæœ€ä½³å¤§å­¦"ï¼‰ï¼Œåªéœ€å°†è¡¨æ”¾å…¥ SQLiteï¼ŒAPI <em>è‡ªåŠ¨</em>å¯ç”¨å®ƒï¼Œæ— éœ€æ”¹åŠ¨ä¸€è¡Œä»£ç ã€‚</li></ul></li><li><p><strong>å»¶è¿Ÿå¯¼å…¥</strong>ï¼š
åœ¨ <code>routes/universities.py</code> ä¸­ï¼Œä½ ä¼šçœ‹åˆ°å¯¼å…¥ <em>åœ¨</em> å‡½æ•°å†…éƒ¨ï¼ˆå¦‚ <code>from models.university import get_university_by_id</code>ï¼‰</p><ul><li><strong>AI è¾…åŠ©æ¨¡å¼</strong>ï¼šAI å»ºè®®è¿™ä¸ªæ¨¡å¼é¿å…å¸¸å›°æ‰° Flask åº”ç”¨çš„å¾ªç¯ä¾èµ–ã€‚è¿™ç§æ–¹æ³•ç» AI ä¼˜åŒ–åï¼Œè®©å¼€å‘è€…å¿«é€Ÿè¿­ä»£ã€é‡æ„æ–‡ä»¶ã€å¤åˆ¶ç²˜è´´é€»è¾‘ï¼Œä¸ä¼šç ´ååº”ç”¨åˆå§‹åŒ–ã€‚è¿™æ˜¯å…³äºå‡å°‘å¼€å‘æ‘©æ“¦ã€æå‡ä»£ç åº“å¯ç»´æŠ¤æ€§ã€‚</li></ul></li></ol><hr><h2 id=4-å®ç”¨è·¯ç”±routesdropdownpy>4. å®ç”¨è·¯ç”±ï¼š<code>routes/dropdown.py</code><a hidden class=anchor aria-hidden=true href=#4-å®ç”¨è·¯ç”±routesdropdownpy>#</a></h2><p>è¿™äº›å‡½æ•°é€šè¿‡æä¾›é€‰é¡¹åˆ—è¡¨å¸®åŠ©å‰ç«¯æ„å»º UIã€‚</p><h3 id=å‡½æ•°get_countries-get-dropdowncountries>å‡½æ•°ï¼š<code>get_countries</code> (<code>GET /dropdown/countries</code>)<a hidden class=anchor aria-hidden=true href=#å‡½æ•°get_countries-get-dropdowncountries>#</a></h3><ul><li><strong>è¾“å…¥</strong>ï¼šæ— </li><li><strong>é€»è¾‘</strong>ï¼šæ‰«ææ•°æ®åº“æŸ¥æ‰¾æ‰€æœ‰å›½å®¶</li><li><strong>è¾“å‡º</strong>ï¼šå›½å®¶åç§° JSON åˆ—è¡¨ï¼ˆå¦‚ <code>["USA", "China", "UK", ...]</code>ï¼‰</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@dropdown_bp.route</span><span class=p>(</span><span class=s1>&#39;/countries&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_countries</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=kn>from</span> <span class=nn>models.countries</span> <span class=kn>import</span> <span class=n>get_countries_db</span>
</span></span><span class=line><span class=cl>    <span class=n>countries</span> <span class=o>=</span> <span class=n>get_countries_db</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>countries</span>
</span></span></code></pre></div><h3 id=å‡½æ•°get_ranking_options-get-dropdownranking_options>å‡½æ•°ï¼š<code>get_ranking_options</code> (<code>GET /dropdown/ranking_options</code>)<a hidden class=anchor aria-hidden=true href=#å‡½æ•°get_ranking_options-get-dropdownranking_options>#</a></h3><ul><li><strong>è¾“å…¥</strong>ï¼šå¯é€‰è¿‡æ»¤å™¨å¦‚ <code>source</code> æˆ– <code>subject</code></li><li><strong>é€»è¾‘</strong>ï¼šè¿”å›å¯ç”¨æ’åè¡¨çš„å…ƒæ•°æ®ã€‚å‘Šè¯‰å‰ç«¯åœ¨"æ’åºæ–¹å¼"ä¸‹æ‹‰èœå•æ˜¾ç¤ºä»€ä¹ˆé€‰é¡¹</li><li><strong>è¾“å‡º</strong>ï¼šæ’åç±»åˆ« JSON åˆ—è¡¨</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@dropdown_bp.route</span><span class=p>(</span><span class=s1>&#39;/ranking_options&#39;</span><span class=p>,</span> <span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;GET&#39;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_ranking_options</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>start_time</span> <span class=o>=</span> <span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>source</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;source&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>subject</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>args</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;subject&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kn>from</span> <span class=nn>models.ranking_options</span> <span class=kn>import</span> <span class=n>ranking_options</span>
</span></span><span class=line><span class=cl>    <span class=n>tables</span> <span class=o>=</span> <span class=n>ranking_options</span><span class=p>(</span><span class=n>source</span><span class=p>,</span> <span class=n>subject</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>end_time</span> <span class=o>=</span> <span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>duration</span> <span class=o>=</span> <span class=n>end_time</span> <span class=o>-</span> <span class=n>start_time</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Duration: </span><span class=si>{</span><span class=n>duration</span><span class=si>}</span><span class=s2> seconds&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>jsonify</span><span class=p>(</span><span class=n>tables</span><span class=p>)</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://xiaruize.org/zh/tags/python/>Python</a></li><li><a href=https://xiaruize.org/zh/tags/flask/>Flask</a></li><li><a href=https://xiaruize.org/zh/tags/backend/>Backend</a></li><li><a href=https://xiaruize.org/zh/tags/%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/>ä»£ç åˆ†æ</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://xiaruize.org/zh/>xiaruize's Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>