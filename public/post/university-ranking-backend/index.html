<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>Building a University Ranking Backend with Vibe Coding | xiaruize's Blog</title><meta name=keywords content="Python,Flask,Backend,API,SQLite"><meta name=description content="In this post, I&rsquo;ll share the journey of building a University Ranking Backend, a RESTful API designed to aggregate and serve university ranking data from prestigious sources like QS and US News. We&rsquo;ll explore the &ldquo;vibe coding&rdquo; strategy used to build it, the technical methodology, and the core algorithms that make it tick.
ðŸ“š Read the Full Series
This project is too interesting to cover in just one post! I&rsquo;ve broken down the technical details into a deep-dive series:"><meta name=author content><link rel=canonical href=http://localhost:1313/post/university-ranking-backend/><link crossorigin=anonymous href=/assets/css/stylesheet.e1f5c4cae44599655f7ff95195ff89c8cb3adbda94f2b1581a434ab2b4d4e6cf.css integrity="sha256-4fXEyuRFmWVff/lRlf+JyMs629qU8rFYGkNKsrTU5s8=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/post/university-ranking-backend/><link rel=alternate hreflang=zh href=http://localhost:1313/zh/post/university-ranking-backend/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css integrity=sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js integrity=sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js integrity=sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"\\[",right:"\\]",display:!0},{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1}],throwOnError:!0})})</script></head><body id="
    top"><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="xiaruize's Blog (Alt + H)">xiaruize's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=http://localhost:1313/zh/ title=ä¸­æ–‡ aria-label=ä¸­æ–‡>Zh</a></li></ul></div></div><ul id=menu><li><a href=http://localhost:1313/categories/ title=categories><span>categories</span></a></li><li><a href=http://localhost:1313/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Building a University Ranking Backend with Vibe Coding</h1><div class=post-meta><span title='2025-12-07 00:00:00 +0000 UTC'>December 7, 2025</span>&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=http://localhost:1313/zh/post/university-ranking-backend/>Zh</a></li></ul></div></header><div class=post-content><p>In this post, I&rsquo;ll share the journey of building a <strong>University Ranking Backend</strong>, a RESTful API designed to aggregate and serve university ranking data from prestigious sources like QS and US News. We&rsquo;ll explore the &ldquo;vibe coding&rdquo; strategy used to build it, the technical methodology, and the core algorithms that make it tick.</p><h2 id=-read-the-full-series>ðŸ“š Read the Full Series<a hidden class=anchor aria-hidden=true href=#-read-the-full-series>#</a></h2><p>This project is too interesting to cover in just one post! I&rsquo;ve broken down the technical details into a deep-dive series:</p><ul><li><strong><a href=http://localhost:1313/post/university-ranking-backend-part-1/>Part 1: The Core Logic & API Structure</a></strong><ul><li>Explores the <code>app.py</code> entry point.</li><li>Explains the &ldquo;Smart Table Selection&rdquo; algorithm in <code>models/universities.py</code>.</li><li>Walks through the API routes.</li></ul></li><li><strong><a href=http://localhost:1313/post/university-ranking-backend-part-2/>Part 2: Data Engineering & Scripts</a></strong><ul><li>Details the ETL process (Extract, Transform, Load).</li><li>Shows how we normalize university names across different datasets.</li><li>Explains the dynamic ranking discovery logic.</li></ul></li></ul><h2 id=-project-introduction>ðŸš€ Project Introduction<a hidden class=anchor aria-hidden=true href=#-project-introduction>#</a></h2><p>The <strong>University Ranking Backend</strong> is a centralized service that provides detailed information about universities worldwide.</p><p><strong>Key Features:</strong></p><ul><li><strong>Aggregated Rankings</strong>: Combines data from multiple sources (QS, US News, Niche).</li><li><strong>Multilingual Support</strong>: Built-in support for English and Chinese university names.</li><li><strong>Smart Filtering</strong>: Allows users to search by name, country, city, and specific ranking criteria.</li></ul><p>The goal was to create a lightweight, queryable interface that frontend applications could easily consume without worrying about the complex logic of merging different ranking datasets.</p><h2 id=-vibe-coding-strategy>ðŸ’¡ Vibe Coding Strategy<a hidden class=anchor aria-hidden=true href=#-vibe-coding-strategy>#</a></h2><p>&ldquo;Vibe coding&rdquo; is an AI-assisted coding approach where developers work with AI tools to accelerate development, using the AI as a collaborative partner to handle repetitive tasks, generate boilerplate code, and explore solutions faster. For this project, the strategy was <strong>Data-First, Logic-Second</strong> with heavy AI assistance.</p><ol><li><strong>Data Collection & &ldquo;Vibe Check&rdquo;</strong>:<ul><li>We started by gathering raw data (CSVs, JSONs) in the <code>data/</code> folder.</li><li>The &ldquo;vibe check&rdquo; here was ensuring the data <em>felt</em> rightâ€”consistent names, correct rankings, and clean formatting.</li></ul></li><li><strong>Scripting the Flow</strong>:<ul><li>Instead of jumping straight into the API, we wrote standalone scripts (<code>scripts/</code>) to process this raw data and populate a SQLite database. This separated the messy data cleaning from the clean application logic.</li></ul></li><li><strong>API as a Gateway</strong>:<ul><li>Once the database was ready, the Flask API was built as a simple gateway. The focus was on making the endpoints intuitive (<code>/filter</code>, <code>/search</code>) rather than over-engineering the architecture.</li></ul></li></ol><p>Check out the <a href=http://localhost:1313/post/university-ranking-backend-part-1/>Part 1</a> and <a href=http://localhost:1313/post/university-ranking-backend-part-2/>Part 2</a> posts for specific examples of how &ldquo;Vibe Coding&rdquo; (AI-assisted development) influenced the code structure, like using lazy imports and dynamic table discovery. These patterns were refined with AI assistance to avoid common pitfalls and optimize for extensibility.</p><h2 id=-methodology>ðŸ›  Methodology<a hidden class=anchor aria-hidden=true href=#-methodology>#</a></h2><p>We chose a lightweight tech stack to keep the development fast and the deployment simple.</p><ul><li><strong>Language</strong>: <strong>Python 3.8+</strong> - The go-to for data-heavy backend work.</li><li><strong>Framework</strong>: <strong>Flask</strong> - Minimalist and flexible. Unlike Django, it doesn&rsquo;t force a structure, allowing us to build exactly what we needed.</li><li><strong>Database</strong>: <strong>SQLite3</strong> - Serverless and file-based. Perfect for read-heavy, write-rare applications like this.</li><li><strong>Extensions</strong>: <code>flask_cors</code> to handle Cross-Origin Resource Sharing, essential for a public API.</li></ul><h3 id=project-structure>Project Structure<a hidden class=anchor aria-hidden=true href=#project-structure>#</a></h3><p>The project follows a clean, modular structure:</p><ul><li><code>app.py</code>: Entry point.</li><li><code>routes/</code>: API Controllers (e.g., <code>universities.py</code>).</li><li><code>models/</code>: Data Layer (e.g., SQL query construction).</li><li><code>data/</code> & <code>scripts/</code>: Raw data and processing pipelines.</li></ul><h2 id=-key-functions-explained>ðŸ“‚ Key Functions Explained<a hidden class=anchor aria-hidden=true href=#-key-functions-explained>#</a></h2><p>To keep the backend organized, we split the logic into different files. Hereâ€™s a simple introduction to the key functions that make the system work:</p><h3 id=1-the-entry-point-apppy>1. The Entry Point (<code>app.py</code>)<a hidden class=anchor aria-hidden=true href=#1-the-entry-point-apppy>#</a></h3><ul><li><strong><code>create_app</code></strong>: This is the starting line. It initializes the Flask application, sets up security rules (CORS) so the frontend can talk to it safely, and plugs in all the different API routes.</li></ul><h3 id=2-the-api-routes-routes>2. The API Routes (<code>routes/</code>)<a hidden class=anchor aria-hidden=true href=#2-the-api-routes-routes>#</a></h3><p>These functions act as the &ldquo;receptionists,&rdquo; handling incoming HTTP requests from users.</p><ul><li><strong><code>filter_universities_route</code></strong> (mapped to <code>/filter</code>): The main search engine. It listens for user inputsâ€”like a search term, a selected country, or a cityâ€”and passes them to the database logic.</li><li><strong><code>get_university</code></strong> (mapped to <code>/&lt;id></code>): Fetches the full profile for a single university. This is used when a user clicks on a specific result to see more details.</li><li><strong><code>get_countries</code></strong> (in <code>dropdown.py</code>): A helper function that scans the database to list all available countries, populating the dropdown menu on the frontend so users know what they can filter by.</li></ul><h3 id=3-the-data-logic-models>3. The Data Logic (<code>models/</code>)<a hidden class=anchor aria-hidden=true href=#3-the-data-logic-models>#</a></h3><p>This is where the heavy lifting happens.</p><ul><li><strong><code>filter_universities</code></strong>: The &ldquo;brain&rdquo; of the operation. It dynamically builds a SQL query to join university data with the correct ranking table based on the user&rsquo;s choice.</li></ul><h2 id=-the-algorithm-dynamic-sql-construction>ðŸ§® The Algorithm: Dynamic SQL Construction<a hidden class=anchor aria-hidden=true href=#-the-algorithm-dynamic-sql-construction>#</a></h2><p>The core intelligence of this backend isn&rsquo;t a complex machine learning model, but a smart <strong>Dynamic SQL Query Builder</strong>.</p><p>The challenge: Users might want to rank universities globally, or they might want to see how they rank specifically within a country (e.g., &ldquo;Best Global Universities in China&rdquo;).</p><p>The solution: <strong>Smart Table Selection</strong>.</p><p>The code dynamically checks if a specific ranking table exists for the requested country. If it does, it seamlessly switches the <code>JOIN</code> operation to that specific table for more accurate local rankings.</p><h3 id=key-code-snippet>Key Code Snippet<a hidden class=anchor aria-hidden=true href=#key-code-snippet>#</a></h3><p>Here is the <code>filter_universities</code> function from <code>models/universities.py</code> that handles this logic. For a line-by-line breakdown, see <a href=http://localhost:1313/post/university-ranking-backend-part-1/>Part 1</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>filter_universities</span><span class=p>(</span><span class=n>query</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>sort_credit</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>country</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>city</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span> <span class=o>=</span> <span class=n>get_db_connection</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1># Default ranking source</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>sort_credit</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>sort_credit</span> <span class=o>=</span> <span class=s2>&#34;US_News_best global universities_Rankings&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>join_table</span> <span class=o>=</span> <span class=n>sort_credit</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Smart Logic: Check for country-specific ranking table</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>country</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>candidate_country</span> <span class=o>=</span> <span class=n>country</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>candidate_table</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;US_News_best global universities in </span><span class=si>{</span><span class=n>candidate_country</span><span class=si>}</span><span class=s2>_Rankings&#34;</span>
</span></span><span class=line><span class=cl>        <span class=c1># ... (code checks if candidate_table exists in DB) ...</span>
</span></span><span class=line><span class=cl>        <span class=c1># If exists, switch to country-specific table</span>
</span></span><span class=line><span class=cl>        <span class=n>join_table</span> <span class=o>=</span> <span class=n>candidate_table</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Base Query</span>
</span></span><span class=line><span class=cl>    <span class=n>sql</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>        SELECT Universities.id, Universities.normalized_name, Universities.name,
</span></span></span><span class=line><span class=cl><span class=s2>               Universities.country, Universities.city, Universities.photo,
</span></span></span><span class=line><span class=cl><span class=s2>               R.rank_value, T.chinese_name
</span></span></span><span class=line><span class=cl><span class=s2>        FROM Universities
</span></span></span><span class=line><span class=cl><span class=s2>        LEFT JOIN University_names_en_to_zh AS T ON Universities.id = T.id
</span></span></span><span class=line><span class=cl><span class=s2>    &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Dynamic Join</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>join_table</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>sql</span> <span class=o>+=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>            LEFT JOIN &#34;</span><span class=si>{</span><span class=n>join_table</span><span class=si>}</span><span class=s2>&#34; AS R
</span></span></span><span class=line><span class=cl><span class=s2>            ON Universities.normalized_name = R.normalized_name
</span></span></span><span class=line><span class=cl><span class=s2>        &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># ... (Filtering logic for query, country, city) ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>sql</span> <span class=o>+=</span> <span class=s2>&#34; ORDER BY R.rank_value ASC NULLS LAST LIMIT 200&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>cursor</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>execute</span><span class=p>(</span><span class=n>sql</span><span class=p>,</span> <span class=n>params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>[</span><span class=nb>dict</span><span class=p>(</span><span class=n>row</span><span class=p>)</span> <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>cursor</span><span class=o>.</span><span class=n>fetchall</span><span class=p>()]</span>
</span></span></code></pre></div><h2 id=-links>ðŸ”— Links<a hidden class=anchor aria-hidden=true href=#-links>#</a></h2><ul><li><strong>GitHub Repository</strong>: <a href=https://github.com/xiaruize0911/University_Ranking_Backend>xiaruize0911/University_Ranking_Backend</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/python/>Python</a></li><li><a href=http://localhost:1313/tags/flask/>Flask</a></li><li><a href=http://localhost:1313/tags/backend/>Backend</a></li><li><a href=http://localhost:1313/tags/api/>API</a></li><li><a href=http://localhost:1313/tags/sqlite/>SQLite</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>xiaruize's Blog</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>